(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const l=document.querySelector("#app"),u=l.querySelector("#searchInput"),c=l.querySelector("#cardList"),d=l.querySelector("#cardDetails");let i=[];async function f(){try{i=(await(await fetch("https://api.magicthegathering.io/v1/cards")).json()).cards,p(i)}catch(e){console.error("Error fetching cards:",e),c.innerHTML='<li class="card-item">Error loading cards.</li>'}}function p(e){c.innerHTML="";const s=new Set;e.forEach(n=>{if(!s.has(n.name)){s.add(n.name);const a=document.createElement("li");a.classList.add("card-item"),a.textContent=n.name,a.addEventListener("click",()=>m(n)),c.appendChild(a)}})}function m(e){d.innerHTML=`
    <h2 class="card-name">${e.name}</h2>
    ${e.imageUrl?`<img src="${e.imageUrl}" alt="${e.name}" class="card-image" />`:""}
    <p class="card-text"><strong>Set:</strong> ${e.set}</p>
    <p class="card-text"><strong>Rarity:</strong> ${e.rarity}</p>
    <p class="card-text"><strong>Type:</strong> ${e.type}</p>
    <p class="card-text"><strong>Text:</strong> ${e.text}</p>
    ${e.purchaseUrls?`<p class="card-text"><a href="${e.purchaseUrls.tcgplayer}" target="_blank" class="card-link">Buy on TCGPlayer</a></p>`:""}
  `,d.classList.add("show")}u.addEventListener("input",e=>{const s=e.target.value.toLowerCase(),n=i.filter(a=>a.name.toLowerCase().includes(s));p(n)});f();
